(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{1797:function(t,e,n){t.exports=n.p+"img/jilu.png"},1798:function(t,e,n){t.exports=n.p+"img/qiandao.png"},1799:function(t,e,n){"use strict";var i=n(504);n.n(i).a},1800:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,".student-notice .an-list li {\n  padding: 10px 20px;\n  border-bottom: 1px solid #e5e5e5;\n}\n.student-notice .an-list li .item-title {\n  font-weight: 900;\n}\n.student-notice .an-list li .item-context {\n  overflow: hidden;\n  padding: 20px;\n}\n.student-notice .an-list li .item-context img {\n  max-width: 100%;\n  height: auto;\n}\n.student-notice .an-list li .item-context td {\n  border: 1px solid;\n  text-align: center;\n}\n.student-notice .an-list li .item-context caption {\n  border: 1px solid;\n  border-bottom: none;\n  text-align: center;\n}\n.student-notice .an-list li .item-footer {\n  text-align: right;\n  font-size: 12px;\n}\n.student-notice .an-list li .item-footer .item-author {\n  font-size: 14px;\n  line-height: 14px;\n  font-weight: 500;\n  margin: 0 15px;\n}\n.student-notice .el-table_empty {\n  text-align: center;\n  line-height: 60px;\n  width: 100%;\n  color: #909399;\n}\n.crumb_top {\n  background: #eee;\n  padding-bottom: 20px;\n}\n.too_left {\n  height: 290px;\n  background: #fff;\n  text-align: center;\n}\n.too_left img {\n  width: 100px;\n  height: 100px;\n  margin-top: 50px;\n}\n.too_left p {\n  margin: 10px 0 25px;\n  font-size: 16px;\n  color: #333333;\n}\n.list_bottom {\n  background: #fff;\n}\n.list_bottom p {\n  padding: 15px 30px;\n  color: #009eff;\n  font-size: 14px;\n  width: 100%;\n}\n",""])},2893:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"student-notice"},[i("div",{staticClass:"crumb_top"},[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[t._v("学生空间")]),t._v(" "),i("el-breadcrumb-item",[t._v("课程公告")])],1)],1),t._v(" "),i("el-row",{staticStyle:{background:"#eee"},attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"too_left"},[i("img",{attrs:{src:n(1797),alt:""}}),t._v(" "),i("p",[i("span",[t._v("上次学到：")]),t._v(" "),t.studentCourseStudyInfo.lastChapterName?[i("el-tooltip",{attrs:{content:t.studentCourseStudyInfo.lastChapterName}},[i("i",[t._v(" "+t._s(t.subName(t.studentCourseStudyInfo.lastChapterName)))])])]:[t._v("\n                        无记录\n                    ")]],2),t._v(" "),i("div",[i("el-button",{staticStyle:{"margin-right":"50px"},attrs:{size:"small",disabled:!t.studentCourseStudyInfo.lastChapterName},on:{click:function(e){return t.loadToChapter()}}},[t._v("继续学习")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"primary",disabled:0===t.Checkedinstatus,loading:t.signinLoadings},on:{click:t.handleSingn}},[t._v(t._s(0==t.currentUserAttendStatus?"签到":"已签到"))])],1)])]),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"too_left"},[i("img",{attrs:{src:n(1798),alt:""}}),t._v(" "),t.signStatus?t._e():i("p",[t._v("你没有漏签的签到")]),t._v(" "),t.signStatus?i("p",[t._v("你有漏签的签到安排")]):t._e(),t._v(" "),t.signStatus?i("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.gotoSign}},[t._v("前往补签")]):t._e()],1)]),t._v(" "),i("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[i("div",{staticClass:"list_bottom"},[i("p",{staticStyle:{"border-bottom":"1px solid #d1d1d1"}},[t._v("最新公告")]),t._v(" "),i("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"an-list"},t._l(t.noticeList,(function(e,n){return i("li",{key:n},[i("div",{staticClass:"item-title"},[t._v(t._s(e.title))]),t._v(" "),i("div",{staticClass:"item-context"},[i("p",[i("i",{domProps:{innerHTML:t._s(e.content)}})])]),t._v(" "),i("div",{staticClass:"item-footer"},[i("span",{staticClass:"item-author"},[t._v(t._s(e.author))]),t._v(" "),i("span",[t._v(t._s(t.Utils.formatDate(new Date(e.time),"yyyy/MM/dd hh:mm:ss")))])])])})),0),t._v(" "),t.noticeList&&0!==t.noticeList.length?t._e():i("div",[i("div",{staticClass:"el-table_empty",staticStyle:{width:"100%"}},[i("img",{staticStyle:{margin:"50px 0"},attrs:{src:n(50),alt:"",width:"290",height:"200"}})])]),t._v(" "),t.noticeList.length>0?i("div",{staticClass:"ta-r pagination pb20 pl20 pr20"},[i("el-pagination",{staticClass:"jxel-pagination",attrs:{background:"","current-page":t.pageNo,"page-sizes":[10,20,40,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-count":t.pageTotal},on:{"size-change":t.sizeChange,"current-change":t.handleCurrentChange}})],1):t._e()])])],1)],1)};i._withStripped=!0;var s={name:"notice",data:function(){return{listLoading:!1,pageNo:1,pageSize:20,pageTotal:0,total:0,studentCourseStudyInfo:{lastChapterId:"0",lastChapterName:"",learningStatus:{id:0,contentName:0}},name:"",course:{id:""},noticeList:[],signinDate:{},Checkedinstatus:0,currentUserAttendStatus:0,signinLoadings:!1,signStatus:!1}},computed:{courseId:function(){return this.$route.params.courseId},isShowSignin:function(){return!!this.signinDate}},methods:{init:function(){this.initNoticeList(),this.initStudentCourseStudyInfo(),this.handlePlans(),this.getSignStatus()},getSignStatus:function(){var t=this;this.Service.get("/attendance/api/attendance/students/getNoSignFlag/".concat(this.getCourseid()),{},(function(e){t.signStatus=e.data}))},gotoSign:function(){this.$router.push({path:"notice/sign"})},subName:function(t){return t&&t.length>20&&(t=t.substring(0,20)+"..."),t},getCourseid:function(){var t=this.$route.params.courseId;return t||""},sizeChange:function(t){this.pageSize=t,this.pageNo=1,this.initNoticeList()},handleCurrentChange:function(t){this.pageNo=t,this.initNoticeList()},initStudentCourseStudyInfo:function(){var t=this,e={courseId:t.getCourseid()};this.Service.get("/jxxt/api/course/courseStudent/lastChapter",e,(function(e){0===e.resultCode&&(t.studentCourseStudyInfo=e.data,t.studentCourseStudyInfo.learningStatus={},t.studentCourseStudyInfo.learningStatus.id=e.data.lastChapterId,t.studentCourseStudyInfo.learningStatus.contentName=e.data.lastChapterName)}))},initNoticeList:function(){var t=this,e={courseId:this.$route.params.courseId,useful:this.Constants.Notice.UseFul.ENABLE,pageNo:this.pageNo,pageSize:this.pageSize,loading:!0};t.listLoading=!0,t.Service.get("/jxxt/api/notices/student/list",e,(function(e){t.listLoading=!1,0===e.resultCode&&(t.noticeList=e.data,e.page&&(t.pageTotal=e.page.totalPage,t.total=e.page.rowCount))}))},loadToChapter:function(){var t=this.studentCourseStudyInfo.lastChapterId;location.href="/ucenter/student/course/study/"+this.getCourseid()+"/plan/detail/"+t},dateFormatter:function(t){if(t)return this.Utils.formatString2Date(t,"yyyy-MM-dd hh:mm:ss")},handleSingn:function(){var t=this;if(1!==this.Checkedinstatus){var e={};e.classId=this.signinDate.classId,e.courseId=this.signinDate.courseId,e.planId=this.signinDate.id,this.signinLoadings=!0;this.Service.postBody("/attendance/api/attendance/students",e,(function(e){t.signinLoadings=!1,e.success?(t.$message({type:"success",message:"签到成功!"}),t.handlePlans()):t.$message.error(e.message)}))}else this.$message({message:"当前未到签到时间！",type:"warning"})},handlePlans:function(){var t=this;this.Service.get("/attendance/api/attendance/plans/todayOnline",{courseId:this.courseId},(function(e){t.signinDate=e.data,e.data&&(t.Checkedinstatus=e.data.status,t.currentUserAttendStatus=e.data.currentUserAttendStatus)}))}},mounted:function(){this.init()},components:{}},a=(n(1799),n(0)),o=Object(a.a)(s,i,[],!1,null,null,null);o.options.__file="web/views/ucenter/student/notice/notice.vue";e.default=o.exports},50:function(t,e,n){t.exports=n.p+"img/meiyou.png"},504:function(t,e,n){var i=n(1800);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n(2).default)("0015c22e",i,!1,{})}}]);